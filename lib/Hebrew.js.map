{"version":3,"sources":["../src/Hebrew.ts"],"names":["defaultLocalisation","name","epochs","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","digits","undefined","dateFormat","firstDay","isRTL","mod","a","b","Math","floor","HebrewCalendar","BaseCalendar","constructor","language","localisations","leapYear","yearOrDate","y","CDate","validate","Calendars","local","invalidYear","minMonth","minDay","isLeapYear","monthsInYear","notDay","notMonth","daysInYear","toJD","daysInMonth","month","m","invalidMonth","daysPerMonth","weekDay","day","dow","dayOfWeek","extraInfo","_","yearType","d","invalidDate","adjYear","jd","jdEpoch","delay1","delay2","mn","fromJD","year","date","months","parts","last","present","next","register"],"mappings":"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","sourcesContent":["/* http://keith-wood.name/worldCalendars.html\r\n   Implementation of the Hebrew civil calendar.\r\n   Based on code from http://www.fourmilab.ch/documents/calendar/.\r\n   See also http://en.wikipedia.org/wiki/Hebrew_calendar.\r\n   Written by Keith Wood (wood.keith{at}optusnet.com.au) May 2022.\r\n   Available under the MIT (http://keith-wood.name/licence.html) license.\r\n   Please attribute the author if you use it. */\r\n\r\nimport Calendars, { BaseCalendar, CDate } from './Calendars'\r\nimport type { CalendarLocalisation, RegionalLocalisations } from './Calendars'\r\n\r\nconst defaultLocalisation: CalendarLocalisation = {\r\n  name: 'Hebrew',\r\n  epochs: ['BAM', 'AM'],\r\n  monthNames: ['Nisan', 'Iyar', 'Sivan', 'Tammuz', 'Av', 'Elul',\r\n    'Tishrei', 'Cheshvan', 'Kislev', 'Tevet', 'Shevat', 'Adar', 'Adar II'],\r\n  monthNamesShort: ['Nis', 'Iya', 'Siv', 'Tam', 'Av', 'Elu', 'Tis', 'Che', 'Kis', 'Tev', 'She', 'Ada', 'Ad2'],\r\n  dayNames: ['Yom Rishon', 'Yom Sheni', 'Yom Shlishi', 'Yom Revi\\'i', 'Yom Chamishi', 'Yom Shishi', 'Yom Shabbat'],\r\n  dayNamesShort: ['Ris', 'She', 'Shl', 'Rev', 'Cha', 'Shi', 'Sha'],\r\n  dayNamesMin: ['Ri', 'She', 'Shl', 'Re', 'Ch', 'Shi', 'Sha'],\r\n  digits: undefined,\r\n  dateFormat: 'dd/mm/yyyy',\r\n  firstDay: 0,\r\n  isRTL: false\r\n}\r\n\r\n// Modulus function which works for non-integers.\r\nconst mod = (a: number, b: number): number => a - (b * Math.floor(a / b))\r\n\r\nclass HebrewCalendar extends BaseCalendar {\r\n  // Localisations for the plugin.\r\n  // Entries are objects indexed by the language code ('' being the default US/English). */\r\n  static localisations: RegionalLocalisations = { '': defaultLocalisation }\r\n\r\n  constructor (language: string = '') {\r\n    // Julian date of start of Hebrew epoch: 7 October 3761 BCE (Gregorian).\r\n    super('Hebrew', 347995.5, HebrewCalendar.localisations[language] || HebrewCalendar.localisations[''],\r\n      [30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 29], 12, false, 1, 7, 1)\r\n  }\r\n\r\n  // Determine whether this date is in a leap year.\r\n  leapYear(date: CDate): boolean;\r\n  leapYear(year: number): boolean;\r\n  leapYear (yearOrDate: CDate | number): boolean {\r\n    let [y] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidYear, yearOrDate, this.minMonth, this.minDay)\r\n    if (y < 0) { y++ } // No year zero\r\n    return this.isLeapYear(y)\r\n  }\r\n\r\n  // Retrieve the number of months in a year.\r\n  monthsInYear (yearOrDate: CDate | number): number {\r\n    let [y] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidYear, yearOrDate, this.minMonth, this.minDay, { notDay: true, notMonth: true })\r\n    if (y < 0) { y++ } // No year zero\r\n    return this.isLeapYear(y) ? 13 : 12\r\n  }\r\n\r\n  // Retrieve the number of days in a year.\r\n  daysInYear (yearOrDate: CDate | number): number {\r\n    const [y] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidYear, yearOrDate, this.minMonth, this.minDay)\r\n    return this.toJD((y === -1 ? +1 : y + 1), 7, 1) - this.toJD(y, 7, 1)\r\n  }\r\n\r\n  // Retrieve the number of days in a month.\r\n  daysInMonth(date: CDate): number;\r\n  daysInMonth(year: number, month: number): number;\r\n  daysInMonth (yearOrDate: CDate | number, month?: number): number {\r\n    const [y, m] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidMonth, yearOrDate, month as number, this.minDay, { notDay: true })\r\n    if (m === 12 && this.leapYear(y)) {\r\n      // Adar I\r\n      return 30\r\n    }\r\n    if (m === 8 && mod(this.daysInYear(y), 10) === 5) {\r\n      // Cheshvan in shlemah year\r\n      return 30\r\n    }\r\n    if (m === 9 && mod(this.daysInYear(y), 10) === 3) {\r\n      // Kislev in chaserah year\r\n      return 29\r\n    }\r\n    return this.daysPerMonth[m - 1]\r\n  }\r\n\r\n  // Determine whether this date is a week day.\r\n  weekDay(date: CDate): boolean;\r\n  weekDay(year: number, month: number, day: number): boolean;\r\n  weekDay (yearOrDate: CDate | number, month?: number, day?: number): boolean {\r\n    const dow = yearOrDate instanceof CDate\r\n      ? this.dayOfWeek(yearOrDate)\r\n      : this.dayOfWeek(yearOrDate, month as number, day as number)\r\n    return dow !== 6\r\n  }\r\n\r\n  // Retrieve additional information about a date - contents depends on calendar.\r\n  extraInfo(date: CDate): Object;\r\n  extraInfo(year: number, month: number, day: number): Object;\r\n  extraInfo (yearOrDate: CDate | number, month?: number, _?: number): Object {\r\n    const [y] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidMonth, yearOrDate, month as number, this.minDay, { notDay: true })\r\n    return { yearType: `${this.leapYear(y) ? 'embolismic' : 'common'} ${['deficient', 'regular', 'complete'][this.daysInYear(y) % 10 - 3]}` }\r\n  }\r\n\r\n  // Retrieve the Julian day number equivalent for this date, i.e. days since January 1, 4713 BCE Greenwich noon.\r\n  toJD(date: CDate): number;\r\n  toJD(year: number, month: number, day: number): number;\r\n  toJD (yearOrDate: CDate | number, month?: number, day?: number): number {\r\n    const [y, m, d] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidDate, yearOrDate, month as number, day as number)\r\n    const adjYear = y <= 0 ? y + 1 : y\r\n    let jd = this.jdEpoch + this.delay1(adjYear) + this.delay2(adjYear) + d + 1\r\n    if (m < 7) {\r\n      for (let mn = 7; mn <= this.monthsInYear(y); mn++) {\r\n        jd += this.daysInMonth(y, mn)\r\n      }\r\n      for (let mn = 1; mn < m; mn++) {\r\n        jd += this.daysInMonth(y, mn)\r\n      }\r\n    } else {\r\n      for (let mn = 7; mn < m; mn++) {\r\n        jd += this.daysInMonth(y, mn)\r\n      }\r\n    }\r\n    return jd\r\n  }\r\n\r\n  // Create a new date from a Julian day number.\r\n  fromJD (jd: number): CDate {\r\n    jd = Math.floor(jd) + 0.5\r\n    let year = Math.floor(((jd - this.jdEpoch) * 98496.0) / 35975351.0) - 1\r\n    while (jd >= this.toJD((year === -1 ? +1 : year + 1), 7, 1)) {\r\n      year++\r\n    }\r\n    let month = (jd < this.toJD(year, 1, 1)) ? 7 : 1\r\n    while (jd > this.toJD(year, month, this.daysInMonth(year, month))) {\r\n      month++\r\n    }\r\n    const day = jd - this.toJD(year, month, 1) + 1\r\n    return this.date(year, month, day)\r\n  }\r\n\r\n  // Test for delay of start of new year and to avoid Sunday, Wednesday, or Friday as start of the new year.\r\n  private delay1 (year: number): number {\r\n    const months = Math.floor((235 * year - 234) / 19)\r\n    const parts = 12084 + 13753 * months\r\n    let day = months * 29 + Math.floor(parts / 25920)\r\n    if (mod(3 * (day + 1), 7) < 3) {\r\n      day++\r\n    }\r\n    return day\r\n  }\r\n\r\n  // Check for delay in start of new year due to length of adjacent years.\r\n  private delay2 (year: number): number {\r\n    const last = this.delay1(year - 1)\r\n    const present = this.delay1(year)\r\n    const next = this.delay1(year + 1)\r\n    return ((next - present) === 356 ? 2 : ((present - last) === 382 ? 1 : 0))\r\n  }\r\n\r\n  // Determine whether this year is a leap year.\r\n  private isLeapYear (year: number): boolean {\r\n    return mod(year * 7 + 1, 19) < 7\r\n  }\r\n}\r\n\r\nCalendars.register('hebrew', HebrewCalendar)\r\n\r\nexport { HebrewCalendar }\r\n"],"file":"Hebrew.js"}