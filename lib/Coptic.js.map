{"version":3,"file":"Coptic.js","names":["defaultLocalisation","name","epochs","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","dateFormat","firstDay","isRTL","CopticCalendar","CalendarBase","constructor","language","localisations","leapYear","yearOrDate","y","CDate","validate","Calendars","local","invalidYear","minMonth","minDay","daysInMonth","month","m","invalidMonth","notDay","daysPerMonth","weekDay","day","dow","dayOfWeek","toJD","d","invalidDate","Math","floor","jdEpoch","fromJD","jd","c","year","date","register"],"sources":["../src/Coptic.ts"],"sourcesContent":["/* http://keith-wood.name/worldCalendars.html\r\n   Implementation of the Coptic calendar.\r\n   See http://en.wikipedia.org/wiki/Coptic_calendar.\r\n   See also Calendrical Calculations: The Millennium Edition\r\n   (http://emr.cs.iit.edu/home/reingold/calendar-book/index.shtml).\r\n   Written by Keith Wood (wood.keith{at}optusnet.com.au) May 2022.\r\n   Available under the MIT (http://keith-wood.name/licence.html) license.\r\n   Please attribute the author if you use it. */\r\n\r\nimport Calendars, { CalendarBase, CDate } from './Calendars'\r\nimport type { CalendarLocalisation, RegionalLocalisations } from './Calendars'\r\n\r\nconst defaultLocalisation: CalendarLocalisation = {\r\n  name: 'Coptic',\r\n  epochs: ['BAM', 'AM'],\r\n  monthNames: ['Thout', 'Paopi', 'Hathor', 'Koiak', 'Tobi', 'Meshir',\r\n    'Paremhat', 'Paremoude', 'Pashons', 'Paoni', 'Epip', 'Mesori', 'Pi Kogi Enavot'],\r\n  monthNamesShort: ['Tho', 'Pao', 'Hath', 'Koi', 'Tob', 'Mesh',\r\n    'Pat', 'Pad', 'Pash', 'Pao', 'Epi', 'Meso', 'PiK'],\r\n  dayNames: ['Tkyriaka', 'Pesnau', 'Pshoment', 'Peftoou', 'Ptiou', 'Psoou', 'Psabbaton'],\r\n  dayNamesShort: ['Tky', 'Pes', 'Psh', 'Pef', 'Pti', 'Pso', 'Psa'],\r\n  dayNamesMin: ['Tk', 'Pes', 'Psh', 'Pef', 'Pt', 'Pso', 'Psa'],\r\n  dateFormat: 'dd/mm/yyyy',\r\n  firstDay: 0,\r\n  isRTL: false\r\n}\r\n\r\nclass CopticCalendar extends CalendarBase {\r\n  // Localisations for the plugin.\r\n  // Entries are objects indexed by the language code ('' being the default US/English). */\r\n  static localisations: RegionalLocalisations = { '': defaultLocalisation }\r\n\r\n  constructor (language: string = '') {\r\n    // Julian date of start of Coptic epoch: 29 August 284 CE (Gregorian).\r\n    super('Coptic', 1825029.5, CopticCalendar.localisations, language,\r\n      [30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 5], 13)\r\n  }\r\n\r\n  // Determine whether this date is in a leap year.\r\n  leapYear(date: CDate): boolean;\r\n  leapYear(year: number): boolean;\r\n  leapYear (yearOrDate: CDate | number): boolean {\r\n    let [y] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidYear, yearOrDate, this.minMonth, this.minDay)\r\n    if (y < 0) { y++ }; // No year zero\r\n    return y % 4 === 3 || y % 4 === -1\r\n  }\r\n\r\n  // Retrieve the number of days in a month.\r\n  daysInMonth(date: CDate): number;\r\n  daysInMonth(year: number, month: number): number;\r\n  daysInMonth (yearOrDate: CDate | number, month?: number): number {\r\n    const [y, m] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidMonth, yearOrDate, month as number, this.minDay, { notDay: true })\r\n    return this.daysPerMonth[m - 1] + (m === 13 && this.leapYear(y) ? 1 : 0)\r\n  }\r\n\r\n  // Determine whether this date is a week day.\r\n  weekDay(date: CDate): boolean;\r\n  weekDay(year: number, month: number, day: number): boolean;\r\n  weekDay (yearOrDate: CDate | number, month?: number, day?: number): boolean {\r\n    const dow = yearOrDate instanceof CDate\r\n      ? this.dayOfWeek(yearOrDate)\r\n      : this.dayOfWeek(yearOrDate, month as number, day as number)\r\n    return (dow || 7) < 6\r\n  }\r\n\r\n  // Retrieve the Julian day number equivalent for this date, i.e. days since January 1, 4713 BCE Greenwich noon.\r\n  toJD(date: CDate): number;\r\n  toJD(year: number, month: number, day: number): number;\r\n  toJD (yearOrDate: CDate | number, month?: number, day?: number): number {\r\n    let [y, m, d] = yearOrDate instanceof CDate\r\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidDate, yearOrDate, month as number, day as number)\r\n    if (y < 0) { y++ } // No year zero\r\n    return d + (m - 1) * 30 + (y - 1) * 365 + Math.floor(y / 4) + this.jdEpoch - 1\r\n  }\r\n\r\n  // Create a new date from a Julian day number.\r\n  fromJD (jd: number): CDate {\r\n    let c = Math.floor(jd) + 0.5 - this.jdEpoch\r\n    let year = Math.floor((c - Math.floor((c + 366) / 1461)) / 365) + 1\r\n    if (year <= 0) { year-- } // No year zero\r\n    c = Math.floor(jd) + 0.5 - this.date(year, 1, 1).toJD()\r\n    const month = Math.floor(c / 30) + 1\r\n    const day = c - (month - 1) * 30 + 1\r\n    return this.date(year, month, day)\r\n  }\r\n}\r\n\r\nCalendars.register('coptic', CopticCalendar)\r\n\r\nexport { CopticCalendar }\r\n"],"mappings":"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"}