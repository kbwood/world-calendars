{"version":3,"sources":["../src/Gregorian.ts"],"names":["defaultLocalisation","name","epochs","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","digits","undefined","dateFormat","firstDay","isRTL","GregorianCalendar","BaseCalendar","constructor","language","localisations","leapYear","yearOrDate","y","CDate","validate","Calendars","local","invalidYear","minMonth","minDay","weekOfYear","month","day","checkDate","date","add","dayOfWeek","Math","floor","dayOfYear","daysInMonth","m","invalidMonth","notDay","daysPerMonth","weekDay","dow","toJD","dateParts","invalidDate","gregorianToJD","fromJD","jd","year","gregorianFromJD","toJSDate","gregorianToJSDate","fromJSDate","jsd","d","gregorianFromJSDate","register"],"mappings":"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","sourcesContent":["/* http://keith-wood.name/worldCalendars.html\r\n   Implementation of the Proleptic Gregorian Calendar.\r\n   See http://en.wikipedia.org/wiki/Gregoriancalendar\r\n   and http://en.wikipedia.org/wiki/Proleptic_Gregoriancalendar.\r\n   Written by Keith Wood (wood.keith{at}optusnet.com.au) April 2022.\r\n   Available under the MIT (http://keith-wood.name/licence.html) license.\r\n   Please attribute the author if you use it. */\r\n\r\nimport Calendars, { BaseCalendar, CDate } from './Calendars'\r\nimport type { CalendarLocalisation, RegionalLocalisations } from './Calendars'\r\n\r\nconst defaultLocalisation: CalendarLocalisation = {\r\n  name: 'Gregorian',\r\n  epochs: ['BCE', 'CE'],\r\n  monthNames: ['January', 'February', 'March', 'April', 'May', 'June',\r\n    'July', 'August', 'September', 'October', 'November', 'December'],\r\n  monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n  dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n  dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\r\n  dayNamesMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\r\n  digits: undefined,\r\n  dateFormat: 'mm/dd/yyyy',\r\n  firstDay: 0,\r\n  isRTL: false\r\n}\r\n\r\nclass GregorianCalendar extends BaseCalendar {\r\n  // Localisations for the plugin.\r\n  // Entries are objects indexed by the language code ('' being the default US/English). */\r\n  static localisations: RegionalLocalisations = { '': defaultLocalisation }\r\n\r\n  constructor (language: string = '') {\r\n    super('Gregorian', 1721425.5, GregorianCalendar.localisations[language] || GregorianCalendar.localisations[''],\r\n      [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31])\r\n  }\r\n\r\n  // Determine whether this date is in a leap year.\r\n  leapYear(date: CDate): boolean;\r\n  leapYear(year: number): boolean;\r\n  leapYear (yearOrDate: CDate | number): boolean {\r\n    let [y] = yearOrDate instanceof CDate\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidYear, yearOrDate, this.minMonth, this.minDay)\r\n    if (y < 0) { y++ } // No year zero\r\n    return y % 4 === 0 && (y % 100 !== 0 || y % 400 === 0)\r\n  }\r\n\r\n  // Determine the week of the year for a date - ISO 8601.\r\n  weekOfYear(date: CDate): number;\r\n  weekOfYear(year: number, month: number, day: number): number;\r\n  weekOfYear (yearOrDate: CDate | number, month?: number, day?: number): number {\r\n    // Find Thursday of this week starting on Monday\r\n    let checkDate = yearOrDate instanceof CDate\n      ? this.date(yearOrDate)\r\n      : this.date(yearOrDate, month as number, day as number)\r\n    checkDate = checkDate.add(4 - (checkDate.dayOfWeek() || 7), 'd')\r\n    return Math.floor((checkDate.dayOfYear() - 1) / 7) + 1\r\n  }\r\n\r\n  // Retrieve the number of days in a month.\r\n  daysInMonth(date: CDate): number;\r\n  daysInMonth(year: number, month: number): number;\r\n  daysInMonth (yearOrDate: CDate | number, month?: number): number {\r\n    const [y, m] = yearOrDate instanceof CDate\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidMonth, yearOrDate, month as number, this.minDay, { notDay: true })\r\n    return this.daysPerMonth[m - 1] + (m === 2 && this.leapYear(y) ? 1 : 0)\r\n  }\r\n\r\n  // Determine whether this date is a week day.\r\n  weekDay(date: CDate): boolean;\r\n  weekDay(year: number, month: number, day: number): boolean;\r\n  weekDay (yearOrDate: CDate | number, month?: number, day?: number): boolean {\r\n    const dow = yearOrDate instanceof CDate\n      ? this.dayOfWeek(yearOrDate)\r\n      : this.dayOfWeek(yearOrDate, month as number, day as number)\r\n    return (dow || 7) < 6\r\n  }\r\n\r\n  // Retrieve the Julian day number equivalent for this date, i.e. days since January 1, 4713 BCE Greenwich noon.\r\n  toJD(date: CDate): number;\r\n  toJD(year: number, month: number, day: number): number;\r\n  toJD (yearOrDate: CDate | number, month?: number, day?: number): number {\r\n    const dateParts = yearOrDate instanceof CDate\n      ? this.validate(Calendars.local.invalidDate, yearOrDate)\r\n      : this.validate(Calendars.local.invalidDate, yearOrDate, month as number, day as number)\r\n    return this.gregorianToJD(dateParts)\r\n  }\r\n\r\n  // Create a new date from a Julian day number.\r\n  fromJD (jd: number): CDate {\r\n    const [year, month, day] = this.gregorianFromJD(jd)\r\n    return this.date(year, month, day)\r\n  }\r\n\r\n  // Convert this date to a standard (Gregorian) JavaScript Date.\r\n  toJSDate(date: CDate): Date;\r\n  toJSDate(year: number, month: number, day: number): Date;\r\n  toJSDate (yearOrDate: CDate | number, month?: number, day?: number): Date {\r\n    const dateParts = yearOrDate instanceof CDate\n      ? this.validate('', yearOrDate)\r\n      : this.validate(Calendars.local.invalidDate, yearOrDate, month as number, day as number)\r\n    return this.gregorianToJSDate(dateParts)\r\n  }\r\n\r\n  // Create a new date from a standard (Gregorian) JavaScript Date.\r\n  fromJSDate (jsd: Date): CDate {\r\n    const [y, m, d] = this.gregorianFromJSDate(jsd)\r\n    return this.date(y, m, d)\r\n  }\r\n}\r\n\r\nCalendars.register('gregorian', GregorianCalendar)\r\n\r\nexport { GregorianCalendar }\r\n"],"file":"Gregorian.js"}